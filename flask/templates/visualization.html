<!-- CS 3308 Group Project -->
<!-- Team 2: Space Monkeys -->
<!-- Visualization Page -->
<!-- Last Update: Dylan Kayyem, 7/31/20223 -->

{% extends "main_layout.html" %}
{% block title %}Transfusion Entry Page{% endblock %}
{% block head %}
    {{ super() }}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="static/javascript/visualization.js"></script>
    <style>
        table, th, td {
          border:1px solid black;
        }
        .container {
            display: flex;
            height: 80vh; /* Set the desired height */
            overflow: hidden;
        }
        .two-thirds-div {
            flex: 2;
            overflow: scroll;
        }
        .one-third-div {
            flex: 1;
        }
        /* Hide scrollbar for webkit-based browsers (Chrome, Safari, Edge) */
        .container::-webkit-scrollbar {
            width: 0.5em;
        }
        .container::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 0.25em;
        }
        #a_positive:hover, #a_negative:hover, #b_positive:hover, #b_negative:hover, #ab_positive:hover, #ab_negative:hover, #o_positive:hover, #o_negative:hover{
            background-color: aqua;
            cursor: pointer; /* Add cursor hover effect */
            font-style:italic;
        }
        td:hover {
            background-color: aquamarine;
        }
    </style>
{% endblock %}
{% block content %}
<h1> Blood Levels & Visualization Page </h1>
<div class="container">
    <div id="pieDiv" class="one-third-div">
        <h3> Pie Graph: </h3>
        <canvas id="pieChart" width="400" height="400"
                data-labels="{{ pie_chart_labels|join(',') }}"
                data-data="{{ pie_chart_data|join(',') }}"></canvas>
    </div>
    <div id = "tableDiv" class = "two-thirds-div">
        <h3> Table of Blood Banks Data </h3>
        
        <table id = "bloodTable"  class="row-orientation">
            <caption>Click on a BloodType to sort lowest-highest units...</caption>
            <thead>
                <tr>
                    <th> ID: </th>
                    <th> Name: </th>
                    <th> Location: </th>
                    <th> Type: </th>
                    <th id = "a_positive" > A+ </th>
                    <th id="b_positive" > B+ </th>
                    <th id="ab_positive" > AB+ </th>
                    <th id="o_positive" > O+ </th>
                    <th id="a_negative" > A- </th>
                    <th id="b_negative" > B- </th>
                    <th id="ab_negative" > AB-  </th>
                    <th id="o_negative" > O- </th>
                </tr>
            </thead>
            <tbody>
                {% for i in range(0, numBloodBanks) %}
                    <tr>
                        <td> {{ getBloodID[i] }} </td>
                        <td> {{ bloodBanksList[i] }} </td>
                        <td> {{ bloodBankAddress[i] }}</td>
                        <td> {{ bloodBankType[i] }} </td>
                        <td> {{ blood_A_positive[i] }} </td>
                        <td> {{ blood_B_positive[i] }} </td>
                        <td> {{ blood_AB_positive[i] }} </td>
                        <td> {{ blood_O_positive[i] }} </td>
                        <td> {{ blood_A_negative[i] }} </td>
                        <td> {{ blood_B_negative[i] }} </td>
                        <td> {{ blood_AB_negative[i] }} </td>
                        <td> {{ blood_O_negative[i] }} </td>
                    </tr>
                {% endfor %}
            </tbody>
            <tbody>
                <!-- table content will dynamically generate -->
            </tbody>
        </table>
    </div>
</div>
{% endblock %}